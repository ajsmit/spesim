% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/report.R
\name{generate_full_report}
\alias{generate_full_report}
\title{(Advanced) Build a human-readable multi-section report}
\usage{
generate_full_report(res)
}
\arguments{
\item{res}{A named list produced by the simulator with at least the elements:
\describe{
\item{\code{P}}{Parameter list returned by \code{\link{load_config}}(). Must
include keys such as \code{N_INDIVIDUALS}, \code{N_SPECIES},
\code{DOMINANT_FRACTION}, \code{FISHER_ALPHA}, \code{FISHER_X}, and, if used,
a tibble \code{GRADIENT} with columns \code{species}, \code{gradient}
(one of "temperature","elevation","rainfall"), \code{optimum}, and \code{tol}.}
\item{\code{env_gradients}}{A data frame with columns \code{temperature_C},
\code{elevation_m}, and \code{rainfall_mm} containing the gridded
environmental fields used for context.}
\item{\code{species_dist}}{An \code{sf} POINT layer of individuals with a
\code{species} column. Used for tallies and alpha snapshots.}
\item{\code{quadrats}}{An \code{sf} POLYGON layer with \code{quadrat_id};
used to compute per-site alpha summaries.}
\item{\code{abund_matrix}}{A site \eqn{\times} species abundance table (first column
\code{site}; remaining columns are species counts), typically returned by
\code{\link{create_abundance_matrix}}().}
\item{\code{site_coords}}{A data frame with columns \code{site}, \code{x},
\code{y} giving quadrat centroids in the same CRS used for analysis.}
}}
}
\value{
A single character scalar containing the full report text. No files
are written by this function; callers typically append the string to a log
or include it in the simulation report sink.
}
\description{
\strong{Most users do not need to call this directly.} When you run
\code{run_spatial_simulation(write_outputs = TRUE)}, a report is written to
disk automatically under your timestamped \code{OUTPUT_PREFIX}. This function
returns the same report as a single character string for advanced workflows
(e.g., embedding the text in another system, tests, or custom pipelines).

The report summarises environmental ranges, gradient correlations, species
abundance distribution, per-quadrat alpha diversity, diversity partitioning,
simple spatial autocorrelation, Fisher log-series validation, and computation
notes (e.g., whether fast Rcpp engines were used for the point processes).
}
\details{
Sections produced:
\itemize{
\item \strong{Environmental Gradients:} min/max/range for temperature (deg C),
elevation (m), rainfall (mm), with a short pattern note and a list of
gradient-responsive species including their optima/tolerances rendered
in natural units.
\item \strong{Gradient Correlations:} pairwise Pearson correlations among
the three gradients and a brief interpretation (orthogonal vs. correlated).
\item \strong{Species Abundance Distribution:} ranked counts with percentage
and labels for dominant and gradient-responsive species.
\item \strong{Spatial Alpha Diversity:} per-quadrat species richness and a
compact species list (with counts) for each quadrat.
\item \strong{Diversity Partitioning:} mean alpha richness (+/-SE), Shannon's
H', Simpson's 1-D, gamma richness, Whittaker and additive beta, mean
pairwise Sorensen dissimilarity (computed as binary Bray-Curtis on
presence-absence), and simple abundance dispersion metrics.
\item \strong{Spatial Autocorrelation:} Pearson correlation between
inter-quadrat distances and differences in richness (a Mantel-style
proxy) with p-value and interpretation.
\item \strong{Fisher Log-series Validation:} RMSE, R^2, max residual between
observed ranks and theoretical log-series abundances; compares configured
\code{FISHER_ALPHA} with \code{\link[vegan]{fisher.alpha}} estimated from
the data.
\item \strong{Computation Notes:} which baseline point-process models were
requested for the dominant and other species (\code{SPATIAL_PROCESS_A},
\code{SPATIAL_PROCESS_OTHERS}), and whether the fast Rcpp engines were
used when applicable:
\itemize{
\item Thomas: \code{rthomas_bbox_cpp} (fast) or spatstat-based fallback
\item Strauss: \code{rstrauss_bbox_cpp} (fast) or spatstat-based fallback
}
}

Internally, this routine relies on base summaries, \pkg{sf} for spatial
intersections, and \pkg{vegan} for diversity indices. It avoids tidy-evaluation
in favor of explicit column access to keep dependencies minimal within a
non-interactive reporting context.
}
\section{Typical usage}{

Most users should read the saved report from disk rather than call this
function. See \code{\link{read_latest_report}()} for a convenient helper.
}

\section{Requirements}{

The \code{res} object must be consistent (all components correspond to the
same simulation and coordinate reference system). Missing or empty inputs
will lead to sections being populated with \code{NA} summaries or informative
defaults where possible; irrecoverable inconsistencies raise errors.
}

\seealso{
\code{\link{run_spatial_simulation}}, \code{\link{read_latest_report}},
\code{\link{create_abundance_matrix}}, \code{\link{calculate_quadrat_environment}}
}
\keyword{internal}
