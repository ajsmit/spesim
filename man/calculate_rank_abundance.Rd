% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/analysis.R
\name{calculate_rank_abundance}
\alias{calculate_rank_abundance}
\title{Rank-Abundance Data}
\usage{
calculate_rank_abundance(species_dist, P)
}
\arguments{
\item{species_dist}{An \code{sf} point object with a character column
\code{species} giving per-individual species identities.}

\item{P}{A named list as returned by \code{\link{load_config}}
containing at least the fields used by
\code{\link{generate_fisher_log_series}}:
\code{N_SPECIES}, \code{N_INDIVIDUALS}, \code{DOMINANT_FRACTION},
\code{FISHER_ALPHA}, and \code{FISHER_X}.}
}
\value{
A data frame with columns:
\describe{
\item{\code{Rank}}{Integer species rank (1 = most abundant).}
\item{\code{Abundance}}{Non-negative integer abundance.}
\item{\code{Source}}{\code{"Observed"} or \code{"Theoretical"}.}
}
}
\description{
Construct a tidy table for rank-abundance plotting by combining
the \strong{observed} species counts in \code{species_dist} with the
\strong{theoretical} Fisher log-series abundances implied by \code{P}.
}
\details{
Observed abundances are computed with base R \code{table()}, ranked
in descending order, and annotated as \code{Source = "Observed"}.
Theoretical abundances are generated via
\code{\link{generate_fisher_log_series}} using parameters in \code{P}
(e.g., \code{N_SPECIES}, \code{N_INDIVIDUALS}, \code{FISHER_ALPHA},
\code{FISHER_X}, \code{DOMINANT_FRACTION}) and annotated as
\code{Source = "Theoretical"}. The two data frames are row-bound.
}
\examples{
\dontrun{
ra <- calculate_rank_abundance(species_dist, P)
head(ra)
}
}
\seealso{
\code{\link{plot_rank_abundance}},
\code{\link{generate_fisher_log_series}}
}
