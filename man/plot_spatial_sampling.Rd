% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/plot_spatial_sampling.R
\name{plot_spatial_sampling}
\alias{plot_spatial_sampling}
\title{Plot the spatial sampling simulation (domain, individuals, quadrats, optional gradient)}
\usage{
plot_spatial_sampling(
  domain,
  species,
  quadrats,
  P,
  show_gradient = FALSE,
  env_gradients = NULL,
  gradient_type = "temperature_C"
)
}
\arguments{
\item{domain}{An \code{sf} polygon or multipolygon representing the study area.
Geometry should be valid and in the same CRS as \code{species} and \code{quadrats}.}

\item{species}{An \code{sf} POINT object of individuals with a character/factor column
named \code{species}. All points must lie within \code{domain} for correct visual
interpretation (the function does not clip).}

\item{quadrats}{An \code{sf} POLYGON/MULTIPOLYGON object with a numeric/integer column
\code{quadrat_id}. Quadrats are drawn as outlines and labeled at their centroids.}

\item{P}{A named list of plotting/summary parameters. The following fields are read
if present (each has a default if missing):
\itemize{
\item \code{POINT_SIZE} (\code{numeric}, default \code{0.2}) — point size for individuals,
\item \code{POINT_ALPHA} (\code{numeric} in \eqn{(0,1)}, default \code{1}) — point transparency,
\item \code{QUADRAT_COLOUR} (\code{character}, default \code{“black”}) — quadrat outline/label colour,
\item \code{BACKGROUND_COLOUR} (\code{character}, default \code{“white”}) — plot background,
\item \code{FOREGROUND_COLOUR} (\code{character}, default \code{”#22223b”}) — domain outline/title colour,
\item \code{N_SPECIES} (\code{integer}) — used to size the palette; inferred from data if absent,
\item \code{N_INDIVIDUALS} (\code{integer}) — used only for the subtitle count if available.
}}

\item{show_gradient}{Logical; if \code{TRUE}, an environmental surface is drawn beneath the
geometries using \code{geom_raster()}. Default \code{FALSE}.}

\item{env_gradients}{\emph{Required when} \code{show_gradient = TRUE}. A data frame with columns
\code{x}, \code{y} (grid coordinates, in the same CRS units as \code{domain}) and one or more
numeric columns representing environmental variables (e.g., \code{temperature_C},
\code{elevation_m}, \code{rainfall_mm}). The column named by \code{gradient_type} must exist and be numeric.}

\item{gradient_type}{Character scalar naming the column in \code{env_gradients} to plot when
\code{show_gradient = TRUE}. Default \code{“temperature_C”}. The legend title is derived from this
name (underscores replaced with spaces and title‑cased).}
}
\value{
A \code{ggplot} object that can be further modified (themes, scales, etc.).
}
\description{
Creates a publication‑quality map of the simulated landscape. The domain outline is
drawn first; simulated individuals (POINT geometries) are overlaid and colored by
species; sampling quadrats (POLYGONs) are drawn with IDs. Optionally an environmental
raster/heat field is shown underneath for context.
}
\details{
Colors for species are drawn from \pkg{colorspace} \code{sequential_hcl} palette “RdPu” (reversed)
and mapped to the unique species present. All layers are plotted in the current display CRS of
the provided \code{sf} objects; ensure consistent CRS across inputs. When \code{show_gradient = TRUE},
the raster is drawn first with partial transparency so the domain outline and points remain visible.
}
\examples{
\dontrun{
p <- plot_spatial_sampling(domain, species_sf, quadrats_sf, P,
                           show_gradient = TRUE,
                           env_gradients = env_df,
                           gradient_type = “elevation_m”)
p + ggplot2::theme(legend.position = “right”)
}
}
\seealso{
\code{\link{run_spatial_simulation}()}, \code{\link{create_sampling_domain}()},
\code{\link{create_environmental_gradients}()}
}
